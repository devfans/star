let HEX_STRINGS="0123456789abcdef",MAP_HEX={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function toHex(e){return Array.from(e||[]).map(e=>HEX_STRINGS[e>>4]+HEX_STRINGS[15&e]).join("")}function fromHex(e){var t=new Uint8Array(Math.floor((e||"").length/2));let n;for(n=0;n<t.length;n++){var s=MAP_HEX[e[2*n]],a=MAP_HEX[e[2*n+1]];if(void 0===s||void 0===a)break;t[n]=s<<4|a}return n===t.length?t:t.slice(0,n)}function consume(e){function t(e){return 255-e}function n(e){return 255-e}var s;return e?(s=e,toHex((new TextEncoder).encode(JSON.stringify(s)).map(t))):(s=e="84dd98909098939addc584dd9c93969a918ba0969bddc5ddc6c7c8cbcfc9cecfcbc8cdcfd29292cbcacb9b9390cc8ecc90989acbc69ccb969589c9cc8b9598cc9d9497cc9ed19e8f8f8cd198909098939a8a8c9a8d9c90918b9a918bd19c9092ddd3dd9c93969a918ba08c9a9c8d9a8bddc5ddb8b0bcacafa7d2c9978fc8d2c78bca878e8799abd2d29a97c6878e8ab994cbacb4b9cbddd3dd9e8f96a08c9c908f9addc5dd978b8b8f8cc5d0d0888888d198909098939a9e8f968cd19c9092d09e8a8b97d08a8c9a8d96919990d18f8d909996939ad4908f9a91969bd4978b8b8f8cc5d0d0888888d198909098939a9e8f968cd19c9092d09e8a8b97d08a8c9a8d96919990d19a929e9693dd82d3dd98968b978a9dddc584dd9c93969a918ba0969bddc5ddc9cfc69acbce9dc79dcececdcfc79d9e9bcf99ceddd3dd9c93969a918ba08c9a9c8d9a8bddc5ddcfcacd9dc99bca999a9cc6cfcc9ccdc9cd9ec9c8cc9cce9d999d9c9dcfcfc69dc9cac9cf9acfccc6dd8282",s=fromHex(e),e=new TextDecoder,JSON.parse(e.decode(s.map(n))))}function md5(e){var s="0123456789abcdef";function t(e){for(var t="",n=0;n<=3;n++)t+=s.charAt(e>>8*n+4&15)+s.charAt(e>>8*n&15);return t}function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,s,a,i){return o((t=o(o(t,e),o(s,i)))<<a|t>>>32-a,n)}function n(e,t,n,s,a,i,o){return r(t&n|~t&s,e,t,a,i,o)}function a(e,t,n,s,a,i,o){return r(t&s|n&~s,e,t,a,i,o)}function i(e,t,n,s,a,i,o){return r(t^n^s,e,t,a,i,o)}function c(e,t,n,s,a,i,o){return r(n^(t|~s),e,t,a,i,o)}for(var d,h,l,g,u=(e=>{for(var t=1+(e.length+8>>6),n=new Array(16*t),s=0;s<16*t;s++)n[s]=0;for(s=0;s<e.length;s++)n[s>>2]|=e.charCodeAt(s)<<s%4*8;return n[s>>2]|=128<<s%4*8,n[16*t-2]=8*e.length,n})(""+e),_=1732584193,m=-271733879,p=-1732584194,y=271733878,f=0;f<u.length;f+=16)_=n(d=_,h=m,l=p,g=y,u[f+0],7,-680876936),y=n(y,_,m,p,u[f+1],12,-389564586),p=n(p,y,_,m,u[f+2],17,606105819),m=n(m,p,y,_,u[f+3],22,-1044525330),_=n(_,m,p,y,u[f+4],7,-176418897),y=n(y,_,m,p,u[f+5],12,1200080426),p=n(p,y,_,m,u[f+6],17,-1473231341),m=n(m,p,y,_,u[f+7],22,-45705983),_=n(_,m,p,y,u[f+8],7,1770035416),y=n(y,_,m,p,u[f+9],12,-1958414417),p=n(p,y,_,m,u[f+10],17,-42063),m=n(m,p,y,_,u[f+11],22,-1990404162),_=n(_,m,p,y,u[f+12],7,1804603682),y=n(y,_,m,p,u[f+13],12,-40341101),p=n(p,y,_,m,u[f+14],17,-1502002290),_=a(_,m=n(m,p,y,_,u[f+15],22,1236535329),p,y,u[f+1],5,-165796510),y=a(y,_,m,p,u[f+6],9,-1069501632),p=a(p,y,_,m,u[f+11],14,643717713),m=a(m,p,y,_,u[f+0],20,-373897302),_=a(_,m,p,y,u[f+5],5,-701558691),y=a(y,_,m,p,u[f+10],9,38016083),p=a(p,y,_,m,u[f+15],14,-660478335),m=a(m,p,y,_,u[f+4],20,-405537848),_=a(_,m,p,y,u[f+9],5,568446438),y=a(y,_,m,p,u[f+14],9,-1019803690),p=a(p,y,_,m,u[f+3],14,-187363961),m=a(m,p,y,_,u[f+8],20,1163531501),_=a(_,m,p,y,u[f+13],5,-1444681467),y=a(y,_,m,p,u[f+2],9,-51403784),p=a(p,y,_,m,u[f+7],14,1735328473),_=i(_,m=a(m,p,y,_,u[f+12],20,-1926607734),p,y,u[f+5],4,-378558),y=i(y,_,m,p,u[f+8],11,-2022574463),p=i(p,y,_,m,u[f+11],16,1839030562),m=i(m,p,y,_,u[f+14],23,-35309556),_=i(_,m,p,y,u[f+1],4,-1530992060),y=i(y,_,m,p,u[f+4],11,1272893353),p=i(p,y,_,m,u[f+7],16,-155497632),m=i(m,p,y,_,u[f+10],23,-1094730640),_=i(_,m,p,y,u[f+13],4,681279174),y=i(y,_,m,p,u[f+0],11,-358537222),p=i(p,y,_,m,u[f+3],16,-722521979),m=i(m,p,y,_,u[f+6],23,76029189),_=i(_,m,p,y,u[f+9],4,-640364487),y=i(y,_,m,p,u[f+12],11,-421815835),p=i(p,y,_,m,u[f+15],16,530742520),_=c(_,m=i(m,p,y,_,u[f+2],23,-995338651),p,y,u[f+0],6,-198630844),y=c(y,_,m,p,u[f+7],10,1126891415),p=c(p,y,_,m,u[f+14],15,-1416354905),m=c(m,p,y,_,u[f+5],21,-57434055),_=c(_,m,p,y,u[f+12],6,1700485571),y=c(y,_,m,p,u[f+3],10,-1894986606),p=c(p,y,_,m,u[f+10],15,-1051523),m=c(m,p,y,_,u[f+1],21,-2054922799),_=c(_,m,p,y,u[f+8],6,1873313359),y=c(y,_,m,p,u[f+15],10,-30611744),p=c(p,y,_,m,u[f+6],15,-1560198380),m=c(m,p,y,_,u[f+13],21,1309151649),_=c(_,m,p,y,u[f+4],6,-145523070),y=c(y,_,m,p,u[f+11],10,-1120210379),p=c(p,y,_,m,u[f+2],15,718787259),m=c(m,p,y,_,u[f+9],21,-343485551),_=o(_,d),m=o(m,h),p=o(p,l),y=o(y,g);return t(_)+t(m)+t(p)+t(y)}function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return"%"+(n=n.length<2?"0"+n:n)}))}function base64UrlDecode(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(t)}catch(e){return atob(t)}}function decodeLogin(e){return base64UrlDecode(e.split(".")[1])}let cse_p2s=(e,t)=>md5(e+"_"+md5(t+"_star_cse"))+md5(t+"_"+e),GetCSEPhrase=e=>{let t="star_cse_"+e;return _get_local([t]).then(e=>e[t])},SetCSEPhrase=(e,t)=>{var n={};return n["star_cse_"+e]=t,_set_local(n)},CSE_PREFIX="CSEXXX";function isCSEEntry(e){return e.startsWith(CSE_PREFIX)}function cse_en(e,t){var n=new TextEncoder;let s=n.encode(t),a=s.length;t=n.encode(e);return CSE_PREFIX+toHex(t.map((e,t)=>255-e^s[t%a]))}function cse_de(e,t){let n=(new TextEncoder).encode(t),s=n.length;return(new TextDecoder).decode(fromHex(e.substring(6)).map((e,t)=>255-(n[t%s]^e)))}function DecodeContent(e,t){return isCSEEntry(e)&&t?cse_de(e,t):e}function EncodeContent(e,t){return!t||isCSEEntry(e)?e:cse_en(e,t)}class Handler{constructor(){this._={}}setLoginType(e){this.loginType=e,SetLoginType(e)}setup(){this.get_node("search-btn").onclick=()=>this.starit(),this.get_node("cancel-btn").onclick=()=>this.refresh(),this.get_node("note-btn").onclick=()=>this.note(),this.get_node("page-cancel-btn").onclick=()=>this.refresh(),this.get_node("save-btn").onclick=()=>this.save(),this.get_node("page-save-btn").onclick=()=>this.save_page(),document.getElementsByName("search-key")[0].addEventListener("keyup",this.search.bind(this)),document.getElementsByName("search-type")[0].addEventListener("change",this.search.bind(this)),this.init()}starit(){chrome.tabs.query({active:!0,lastFocusedWindow:!0},e=>{e=e[0];document.getElementsByName("link")[0].value=e.url,document.getElementsByName("page_name")[0].value=e.title,this.getLinkMessage(e.url).then(e=>{e&&(e.name&&(document.getElementsByName("page_name")[0].value=e.name),e.category&&(document.getElementsByName("category")[0].value=e.category),e.tags)&&(document.getElementsByName("tags")[0].value=e.tags.join(","))}),this.hide_node("search"),this.hide_node("login"),this.show_node("starit")})}getLinkMessage(e){let t=md5(e);return chrome.storage.local.get([t]).then(e=>{if(this._&&this._.data&&e&&e[t]&&this._.data[e[t]])return this._.data[e[t]]})}async init(){this.loginType=GetLoginType(),this.hide_node("starit"),this.hide_node("starpage"),this.hide_node("search"),this.token=await this.get_token(),this.show_signin(),this.get_node("info-signin-btn").onclick=()=>this.signin(),this.get_node("info-signin-btn-google").onclick=()=>this.signin_google(),this.get_node("info-signout-btn").onclick=()=>this.signout(),this.get_node("settings-icon").onclick=()=>this.toggle_settings(),this.get_node("cse-btn").onclick=this.set_cse.bind(this),this.get_node("backup").onclick=this.download_backup.bind(this);let e=!1;if(!this.token){e=!0;var t=GetLocalCode(this.loginType);if(t){this.during_signin();t=await this.authenticate(this.loginType,t);if(console.log("Authenticating with ",this.loginType,t),!t)return void this.signout()}}let n=!1;this.token&&(this.attach_login(),n=!0,(t=localStorage.last_search_key)&&(document.getElementsByName("search-key")[0].value=t,t=localStorage.last_search_type)&&(document.getElementsByName("search-type")[0].value=t),this.show_node("search"),this.hide_signin(e),await this.load_data()),n&&this.search(!0)}async refresh(){this.hide_node("starit"),this.hide_node("starpage"),this.token=await this.get_token(),this.token?(this.show_node("search"),this.hide_signin(),await this.load_data()):(this.hide_node("search"),this.show_signin())}toggle_settings(){this.showing?this.exit_settings():(this.showing=void 0,["search","starit","starpage"].map(e=>{e=this.showing_node(e);e&&(this.showing=e)}),this.showing&&(this.showing.style.display="none"),this.show_node("settings"))}exit_settings(){this.hide_node("settings"),this.showing?this.showing.style.display="flex":this.show_node("search"),this.showing=void 0}async refresh_page(){this.hide_node("starit"),this.hide_node("starpage"),this.token=await this.get_token(),this.token?(this.show_node("search"),await this.hide_signin(),await this.search(!0)):(this.hide_node("search"),this.show_signin())}async logout_page(){this.hide_node("starit"),this.hide_node("starpage"),this.hide_node("search"),this.show_signin()}async load_data(){var e=await this.post(Message.with_token(this.token));return!!e.body.Data&&(this._=e.body.Data.entity,!0)}async authenticate(e,t){try{var n=Message.with_login(e,t);if((await this.post(n)).info.Token)return this.attach_login(),!0}catch(e){console.log(e)}return!1}show_signin(){this.hide_node("info-signout-btn"),this.show_node("info-signin-btn"),this.show_node("info-google"),this.hide_node("avatar-img"),this.show_node("avatar-img-gh"),document.getElementById("info-user").innerHTML="Sign in with Github Account",document.getElementById("info-email").innerHTML="Please sign in first.",this.get_node("settings-icon").setAttribute("class","settings-icon-hidden")}during_signin(){this.hide_node("info-signin-btn"),"google"==this.loginType?(this.hide_node("avatar-img-gh"),this.show_node("avatar-img-gg")):(this.hide_node("avatar-img-gg"),this.show_node("avatar-img-gh")),this.hide_node("info-google"),document.getElementById("info-user").innerHTML="Loading profile, please wait...",document.getElementById("info-email").innerHTML="This may take some seconds."}async hide_signin(e){this.get_node("settings-icon").setAttribute("class","settings-icon");var e=await this.load_profile(e);e&&(e=JSON.parse(e),document.getElementById("avatar-img").src=e.avatar_url||e.picture,document.getElementById("info-user").innerHTML=e.login||e.name,document.getElementById("info-email").innerHTML=e.email||e.bio||e.location,this.hide_node("avatar-img-gh"),this.hide_node("avatar-img-gg"),this.hide_node("info-signin-btn"),this.hide_node("info-google"),this.show_node("info-signout-btn"),this.show_node("avatar-img"))}async load_profile(e){let t;return(t=e?t:await this.read_profile())||(e=this._code||GetLocalCode(this.loginType))&&("github"==this.loginType?t=await Message.get("https://api.github.com/user",{headers:{Authorization:"token "+e}}):"google"==this.loginType&&(t=await Message.get("https://www.googleapis.com/oauth2/v1/userinfo?access_token="+e,{})),await this.write_profile(t)),t}async attach_login(){var e=this.get_user().usr,e=await GetCSEPhrase(e);this._user_cse=e||"",this.toggle_lock(this._user_cse)}toggle_lock(e){e?(this.show_node("cse-lock"),this.show_node("page-cse-lock"),document.getElementsByName("cse_phrase")[0].placeholder="********************"):(this.hide_node("cse-lock"),this.hide_node("page-cse-lock"),document.getElementsByName("cse_phrase")[0].placeholder="cse phrase")}async set_cse(){var e=document.getElementsByName("cse_phrase")[0].value.trim();await this.apply_cse(e),this.toggle_lock(e)}async apply_cse(e){var t=this.get_user().usr,e=e?cse_p2s(t,e):"";this._user_cse=e||"",await SetCSEPhrase(t,e)}async clear_cse(){this._user_cse="",await this.apply_cse(""),this.toggle_lock("")}get_user(){return JSON.parse(decodeLogin(this.token))}signin(){this.setLoginType("github"),OAuth2.loadAdapter("github",this._signin.bind(this))}signin_google(){this.setLoginType("google"),OAuth2.loadAdapter("google",this._signin.bind(this))}_signin(){let t;var e;(t="google"==this.loginType?(e=consume(),new OAuth2("google",e.google)):(e=consume(),new OAuth2("github",e.github))).authorize(()=>{var e=t.getAccessToken();this._code=e,this.load_profile(!0),this.profile(e)})}async profile(e){let t=!1;try{e&&await this.authenticate(this.loginType,e)&&(this._code=e,t=!0,await this.refresh(),this.search(!0))}catch(e){console.error(e)}t||alert("Failed to signin, please try again!")}async signout(){this.show_signin(),await this.clear_cse(),this.set_token(""),this.write_profile(""),this._code="",this.token="",ClearLocalCode(this.loginType),this.logout_page(),chrome.runtime.sendMessage({signout:!0}),this._={},document.getElementsByName("search-key")[0].value="",this.hide_node("search-results"),this.get_node("search-results").replaceChildren(),localStorage.last_search_key="",localStorage.last_search_type=""}async gh_login(){var e=chrome.identity.getRedirectURL("gh_cb");let t=new RegExp(e+"[#?](.*)");e={interactive:!0,url:"https://github.com/login/oauth/authorize?client_id=fc69b756691fadc93e10&redirect_uri="+encodeURIComponent(e)};chrome.identity.launchWebAuthFlow(e,e=>{console.log("launchWebAuthFlow completed",chrome.runtime.lastError,e),chrome.runtime.lastError||(e=e.match(t))&&1<e.length||console.log(new Error("Invalid redirect URI"))})}async login(){console.log("logging in");var e=document.getElementsByName("account")[0].value.trim(),t=document.getElementsByName("password")[0].value.trim(),e=Message.with_login(e,t);await this.post(e),await this.refresh()}async save(){var e,t=document.getElementsByName("link")[0].value.trim(),n=document.getElementsByName("page_name")[0].value.trim(),s=document.getElementsByName("category")[0].value.trim(),a=document.getElementsByName("tags")[0].value.split(",").map(e=>e.trim()).filter(e=>e);s&&n&&t?((e=Message.with_token(this.token)).actions.push({Put:{id:"",page:{name:n,category:s,content:t,tags:a,page_type:"Link"}}}),(n=await this.post(e)).body.Data&&(this._=n.body.Data.entity,this.refresh_page())):alert("Name/Content/Category can not be null!")}async save_page(){var e,t=document.getElementsByName("page_content")[0].value.trim(),n=document.getElementsByName("page_title")[0].value.trim(),s=document.getElementsByName("page_category")[0].value,a=document.getElementsByName("page_tags")[0].value.split(",").map(e=>e.trim()).filter(e=>e);s&&n&&t?(t=EncodeContent(t,this._user_cse),(e=Message.with_token(this.token)).actions.push({Put:{id:"",page:{name:n,category:s,content:t,tags:a,page_type:"Note"}}}),(n=await this.post(e)).body.Data&&(this._=n.body.Data.entity,this.refresh_page())):alert("Name/Content/Category can not be null!")}async search(e){if(this._.data){window.focus();var a=document.getElementsByName("search-key")[0].value;if(a){let t=a.toLowerCase(),n=document.getElementsByName("search-type")[0].value,s=t.split(",").map(e=>e.trim()).filter(e=>e);t=s[0];let e;e=1==s.length?e=>{switch(n){case"category":return t==e.category.toLowerCase();case"tag":return e.tags.map(e=>e.toLowerCase()).includes(t);case"name":return e.name.toLowerCase().includes(t);default:return[e.category.toLowerCase(),e.name.toLowerCase(),...e.tags.map(e=>e.toLowerCase())].join("|").includes(t)}}:e=>{let t=[e.category.toLowerCase(),e.name.toLowerCase(),...e.tags.map(e=>e.toLowerCase())].join("|");return s.every(e=>t.includes(e))};var i=Object.values(this._.data).filter(e).map(this.render_msg.bind(this));h.hide_node("search-results"),h.get_node("search-results").replaceChildren(...i),h.show_node("search-results"),localStorage.last_search_key=a,localStorage.last_search_type=n}else localStorage.last_search_key="",!(localStorage.last_search_type="")===e&&(i=Object.values(this._.data).map(this.render_msg.bind(this)),h.hide_node("search-results"),h.get_node("search-results").replaceChildren(...i),h.show_node("search-results"))}}loadingOn(){document.getElementById("loader").className="loader",document.getElementById("save-loader").className="loader",document.getElementById("save-page-loader").className="loader"}loadingOff(){document.getElementById("loader").className="loaderOff",document.getElementById("save-loader").className="loaderOff",document.getElementById("save-page-loader").className="loaderOff"}async post(e){this.loadingOn();var t=await Message.post("https://maester.livefeed.cn",e,{cred:!1});if(this.loadingOff(),"403"!=e.status)return(e=JSON.parse(t))&&e.info&&e.info.Token&&(await this.set_token(e.info.Token.token),this.token=e.info.Token.token),e.body.Data&&this.cache_links(e.body.Data),e;this.signout()}async cache_links(e){if(e.entity&&e.entity.data){var t,n=e.entity.data,s={};for(t in n)"Link"==n[t].page_type&&(s[md5(n[t].content)]=t);chrome.storage.local.set(s).then(chrome.runtime.sendMessage(null))}}hide_node(e){this.get_node(e).style.display="none"}showing_node(e){e=this.get_node(e);if("flex"==e.style.display)return e}show_node(e){this.get_node(e).style.display="flex"}get_node(e){return document.getElementById(e)}render_msg(e){var t=this.get_tpl_item(),n=(t.children[0].children[0].children[0].innerHTML=e.name,t.children[0].children[0].children[1].innerHTML=e.content,t.children[0].children[1].children[0].innerHTML=e.category,e.tags.map(this.render_tag.bind(this)));return t.children[0].children[1].children[1].replaceChildren(...n),t.onclick=()=>{this.open(e)},t}note(){var e={tags:[],name:"",category:"",content:""};document.getElementsByName("page_title")[0].value=e.name,document.getElementsByName("page_content")[0].value=e.content,document.getElementsByName("page_category")[0].value=e.category,document.getElementsByName("page_tags")[0].value=e.tags.join(","),this.hide_node("starit"),this.hide_node("search"),this.hide_node("login"),this.show_node("starpage")}open(e){var t;"Link"==e.page_type?chrome.tabs.create({url:e.content}):(document.getElementsByName("page_title")[0].value=e.name,t=DecodeContent(e.content,this._user_cse),document.getElementsByName("page_content")[0].value=t,document.getElementsByName("page_category")[0].value=e.category,document.getElementsByName("page_tags")[0].value=e.tags.join(","),this.hide_node("starit"),this.hide_node("search"),this.hide_node("login"),this.show_node("starpage"))}render_tag(e){var t=this.get_tpl_tag();return t.innerHTML=e,t}get_tpl_item(){return document.getElementById("tpl-item").cloneNode(!0)}get_tpl_tag(){return document.getElementById("tpl-tag").cloneNode(!0)}async get_token(){var e=await this.read("maester-key");if(e)return e["maester-key"]}set_token(e){return this.write("maester-key",e)}async read_profile(){var e=await this.read("profile");if(e)return e.profile}write_profile(e){return this.write("profile",e)}write(e,t){var n={};return n[e]=t,_set_local(n)}read(e){return _get_local([e])}download_backup(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this._))),e.setAttribute("download","star_backup.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}let promisify=n=>(...t)=>new Promise(e=>{t.push(e),n(...t)}),_set_local=promisify(chrome.storage.local.set.bind(chrome.storage.local)),_get_local=promisify(chrome.storage.local.get.bind(chrome.storage.local)),h=new Handler;class Message{static _new(){return{info:"Null",time:0,actions:[],body:"Null"}}static with_login(e,t){var n=Message._new();return n.info={Login:{user:e,pass:t}},n}static with_token(e){var t=Message._new();return t.info={Token:{token:e}},t}static get(a,i={}){return new Promise((e,t)=>{let n=new XMLHttpRequest,s=i.headers;n.open("GET",a),s&&Object.keys(s).forEach(e=>{n.setRequestHeader(e,s[e])}),n.onload=function(){e(n.response)},n.onerror=function(e){t(e)},n.send()})}static post(a,i,o){return new Promise((e,t)=>{let n=new XMLHttpRequest,s=(n.open("POST",a),o.headers);s&&Object.keys(s).forEach(e=>{n.setRequestHeader(e,s[e])}),!1!==o.cred&&(n.withCredentials=!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onload=function(){i.status=n.status,e(o.text?n.responseText:n.response)},n.onerror=function(e){console.log("Server Error("+n.status+"):\n"+(n.responseText||n.response)+"\n"+JSON.stringify(e)+"\n\nFind support at https://github.com/devfans/star\n"),t(e)},n.send(JSON.stringify(i))})}}let SetLoginType=e=>{localStorage.LOGIN_TYPE=e},GetLoginType=()=>localStorage.LOGIN_TYPE||"github",GetLocalCode=e=>{e=localStorage["oauth2_"+e];try{return(e?JSON.parse(e):{}).accessToken}catch(e){}},ClearLocalCode=e=>{localStorage["oauth2_"+e]="{}"},setup=()=>{console.log("......"),h.setup()};function parseRedirectFragment(e){var e=e.split(/&/),t={};return e.forEach(function(e){e=e.split(/=/);t[e[0]]=e[1]}),t}setup();